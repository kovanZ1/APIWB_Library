# WB API Library

Единая библиотека для работы с API Wildberries: документация по разделам (`.md`) + готовые минимальные примеры запросов (`.py`) для каждого эндпоинта.

## Цель библиотеки

- Быстро находить нужный эндпоинт по разделу.
- Запускать рабочий пример запроса без ручной сборки структуры.
- Понимать, какие параметры обязательны, а какие опциональны.
- Использовать единый и предсказуемый формат кода по всем разделам API.

## Структура проекта

| Раздел | Папка | Документация | Python-примеры | Эндпоинты |
|---|---|---:|---:|---:|
| Аналитика и данные | `API WB/Analytics` | 4 `.md` (+ `README.md`) | 16 | 16 |
| Маркетинг и продвижение | `API WB/Marketing` | 8 `.md` (+ `README.md`) | 36 | 36 |
| Отчёты | `API WB/Reports` | 10 `.md` (+ `README.md`) | 26 | 26 |
| Документы и бухгалтерия | `API WB/Docks&Buhgalteria` | 3 `.md` (+ `README.md`) | 6 | 6 |

Итого:
- `84` эндпоинта
- `84` Python-примера

## Как устроены `.py` файлы

Каждый файл — это один конкретный API-метод:
- имя формируется из `method + path` (например, `get_api_v1_supplier_orders.py`)
- в примере указаны только обязательные параметры
- в комментариях рядом указаны доступные опциональные параметры
- используется единый шаблон вызова через `requests.request(...)`
- результат печатается как JSON (или `text`, если JSON нет)

Общий шаблон в каждом файле:
- `TOKEN = os.getenv("WB_API_TOKEN", "YOUR_WB_TOKEN")`
- `BASE_URL = "..."`
- `params = ...` (query-параметры)
- `payload = ...` (тело запроса для `POST/PUT/PATCH/DELETE`)

## Быстрый старт

1. Установите зависимости:

```bash
pip install requests
```

2. Экспортируйте токен:

```bash
export WB_API_TOKEN="ваш_токен_WB"
```

3. Запустите нужный пример:

```bash
python3 "API WB/Analytics/post_api_v2_search_report_report.py"
```

## Как искать нужный запрос

1. Выберите раздел (`Analytics`, `Marketing`, `Reports`, `Docks&Buhgalteria`).
2. Откройте `README.md` раздела и найдите путь эндпоинта.
3. Запустите одноимённый `.py` файл в этой же папке.

Примеры:
- аналитика остатков: `API WB/Analytics/post_api_v2_stocks_report_products_groups.py`
- запуск кампании: `API WB/Marketing/get_adv_v0_start.py`
- отчёт по регионам: `API WB/Reports/get_api_v1_analytics_region_sale.py`
- список документов: `API WB/Docks&Buhgalteria/get_api_v1_documents_list.py`

## Соглашения по параметрам в примерах

- Если обязательных query-параметров нет, ставится `params = None`.
- Если обязательного тела нет, ставится `payload = None`.
- Если параметр в документации «фактически обязательный», он добавлен в пример (например, `downloadId` для retry-эндпоинта CSV).
- Для сложных методов с несколькими форматами запроса используется минимальный валидный вариант + комментарий с альтернативами.

## Домены API, используемые в библиотеке

- `https://seller-analytics-api.wildberries.ru`
- `https://statistics-api.wildberries.ru`
- `https://advert-api.wildberries.ru`
- `https://advert-media-api.wildberries.ru`
- `https://dp-calendar-api.wildberries.ru`
- `https://finance-api.wildberries.ru`
- `https://documents-api.wildberries.ru`

## Ограничения и практические рекомендации

- Учитывайте rate limits для каждого эндпоинта (они указаны в `.md` файлах).
- Не запускайте массово много примеров параллельно с одного токена.
- Для асинхронных отчётов используйте сценарий: `create task -> status -> download`.
- Для инкрементальных выгрузок (где применимо) используйте поля-маркеры из ответа (`lastChangeDate`, `rrd_id` и т.д.).

## Поддержка и обновление библиотеки

При добавлении нового эндпоинта:
1. Добавьте описание в соответствующий `.md` файл раздела.
2. Добавьте отдельный `.py` пример рядом.
3. Обновите `README.md` раздела (количество и карту методов).
4. Обновите этот `API WB/README.md` (общие счётчики и структуру при необходимости).
