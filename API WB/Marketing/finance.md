# Финансы

Базовый домен: `https://advert-api.wildberries.ru`

---

## 1) GET `/adv/v1/balance`

**Назначение:** получить финансовые остатки кабинета продвижения.

### Что возвращает

- `balance` — счёт, который пополняет продавец.
- `net` — расчётный баланс взаиморасчёта (не пополняется вручную).
- `bonus` — бонусные начисления WB.
- `cashbacks[]` — промо-бонусы с ограничениями использования.

### Лимит

- `1 сек`: 1 запрос, интервал `1 сек`, всплеск 5.

### Пример

```bash
curl -X GET "https://advert-api.wildberries.ru/adv/v1/balance" \
  -H "Authorization: $WB_API_TOKEN"
```

### Ответ `200`

| Поле | Тип | Описание |
|---|---|---|
| `balance` | integer | Счёт, ₽ |
| `net` | integer | Баланс, ₽ |
| `bonus` | integer | Бонусы, ₽ |
| `cashbacks` | array<object> | Промо-бонусы |

Элемент `cashbacks[]`:

| Поле | Тип | Описание |
|---|---|---|
| `sum` | integer | Сумма промо-бонусов, ₽ |
| `percent` | integer | Допустимый % от пополнения, который можно оплатить промо-бонусами |
| `expiration_date` | string | Дата окончания действия бонусов |

### Ошибки

- `400` — текстовая ошибка
- `401`, `429`

---

## 2) GET `/adv/v1/budget`

**Назначение:** получить бюджет конкретной кампании.

### Лимит

- `1 сек`: 4 запроса, интервал `250 мс`, всплеск 4.

### Пример

```bash
curl -G "https://advert-api.wildberries.ru/adv/v1/budget" \
  -H "Authorization: $WB_API_TOKEN" \
  --data-urlencode "id=1234567"
```

### Query-параметры

| Параметр | Тип | Обяз. | Описание |
|---|---|---|---|
| `id` | integer | да | ID кампании |

### Ответ `200`

| Поле | Тип | Описание |
|---|---|---|
| `cash` | integer | Не используется, всегда `0` |
| `netting` | integer | Не используется, всегда `0` |
| `total` | integer | Бюджет кампании, ₽ |

### Ошибки

- `400` — текстовая ошибка (например, кампания не принадлежит продавцу)
- `401`, `429`

---

## 3) POST `/adv/v1/budget/deposit`

**Назначение:** пополнить бюджет кампании.

### Лимит

- `1 сек`: 1 запрос, интервал `1 сек`, всплеск 5.

### Пример

```bash
curl -X POST "https://advert-api.wildberries.ru/adv/v1/budget/deposit?id=1234567" \
  -H "Authorization: $WB_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "sum": 5000,
    "cashback_sum": 1000,
    "cashback_percent": 50,
    "type": 1,
    "return": true
  }'
```

### Query-параметры

| Параметр | Тип | Обяз. | Описание |
|---|---|---|---|
| `id` | integer | да | ID кампании |

### Тело запроса

| Поле | Тип | Обяз. | Описание |
|---|---|---|---|
| `sum` | integer | нет* | Общая сумма пополнения |
| `cashback_sum` | integer\|null | нет | Часть суммы промо-бонусами |
| `cashback_percent` | integer\|null | условно | Обязателен, если передан `cashback_sum` |
| `type` | integer | нет | Источник списания: `0` счёт, `1` баланс, `3` бонусы |
| `return` | boolean | нет | Если `true`, вернётся обновлённый бюджет |


i) Практически для пополнения должны быть переданы `sum` и `type`.
ii) Промо-бонусы (`cashback_sum`) допустимы только с источниками `0` или `1`.

### Ответ `200`

- Если `return=true`, возвращается объект:
  - `total` — обновлённый бюджет.
- Если `return=false` или параметр отсутствует — успешный ответ без полезной нагрузки.

### Ошибки

- `400` — ошибки валидации (например, сумма не кратна 50; минимальная сумма по примеру ошибок — 1000 ₽; неверный тип для cashback).
- `401`, `429`.

---

## 4) GET `/adv/v1/upd`

**Назначение:** получить историю фактических затрат на рекламные кампании за период.

### Лимит

- `1 сек`: 1 запрос, интервал `1 сек`, всплеск 5.

### Пример

```bash
curl -G "https://advert-api.wildberries.ru/adv/v1/upd" \
  -H "Authorization: $WB_API_TOKEN" \
  --data-urlencode "from=2026-01-01" \
  --data-urlencode "to=2026-01-15"
```

### Query-параметры

| Параметр | Тип | Обяз. | Ограничения |
|---|---|---|---|
| `from` | date | да | Начало интервала |
| `to` | date | да | Конец, интервал 1..31 день |

### Ответ `200`

Тип: `array`.

| Поле | Тип | Описание |
|---|---|---|
| `updNum` | integer | Номер документа |
| `updTime` | date-time\|null | Время списания |
| `updSum` | integer | Сумма списания |
| `advertId` | integer | ID кампании |
| `campName` | string | Название кампании |
| `advertType` | integer | Тип кампании |
| `paymentType` | string | Источник списания (`Баланс`, `Бонусы`, `Счёт`, `Кэшбэк`) |
| `advertStatus` | integer | Статус кампании |

### Ошибки

- `400` — текстовая ошибка
- `401`, `429`

---

## 5) GET `/adv/v1/payments`

**Назначение:** получить историю пополнений счёта WB Продвижение.

### Лимит

- `1 сек`: 1 запрос, интервал `1 сек`, всплеск 5.

### Пример

```bash
curl -G "https://advert-api.wildberries.ru/adv/v1/payments" \
  -H "Authorization: $WB_API_TOKEN" \
  --data-urlencode "from=2026-01-01" \
  --data-urlencode "to=2026-01-31"
```

### Query-параметры

| Параметр | Тип | Обяз. | Ограничения |
|---|---|---|---|
| `from` | date | нет | Начало интервала |
| `to` | date | нет | Конец интервала, 1..31 день |

### Ответы

- `200` — массив платежей:

| Поле | Тип | Описание |
|---|---|---|
| `id` | integer | ID платежа |
| `date` | date-time | Дата платежа |
| `sum` | integer | Сумма платежа |
| `type` | integer | Источник: `0` счёт, `1` баланс, `3` карта |
| `statusId` | integer | Статус: `0` ошибка, `1` обработано |
| `cardStatus` | string | Статус карточной операции (`success`, `fail`, `pending`, `unknown`) |

- `204` — история пополнений не найдена.

### Ошибки

- `400` — текстовая ошибка
- `401`, `429`
